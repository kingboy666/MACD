# MACD交易机器人 - Railway部署版

基于MACD(6,32,9)策略的OKX永续合约自动交易机器人，专为Railway平台部署优化。

## 功能特点

- **MACD策略**: 使用MACD(6,32,9)金叉死叉信号
- **ADX过滤**: 过滤震荡市场，只在趋势市场交易
- **智能仓位管理**: 根据账户大小动态分配资金
- **风险控制**: 每日交易次数和亏损限制
- **自动平仓**: MACD反向交叉自动平仓

## Railway部署步骤

### 1. 准备工作

1. 注册Railway账户: https://railway.app
2. 获取OKX API密钥:
   - 登录OKX交易所
   - 进入API管理页面
   - 创建新的API密钥（需要交易权限）
   - 记录API Key、Secret Key和Passphrase

### 2. 部署到Railway

#### 方法一：GitHub连接（推荐）

1. 将代码上传到GitHub仓库
2. 在Railway中点击"New Project"
3. 选择"Deploy from GitHub repo"
4. 选择你的仓库
5. Railway会自动检测并部署

#### 方法二：CLI部署

1. 安装Railway CLI:
   ```bash
   npm install -g @railway/cli
   ```

2. 登录Railway:
   ```bash
   railway login
   ```

3. 初始化项目:
   ```bash
   railway init
   ```

4. 部署:
   ```bash
   railway up
   ```

### 3. 配置环境变量

在Railway项目面板中设置以下环境变量：

- `OKX_API_KEY`: 你的OKX API密钥
- `OKX_SECRET_KEY`: 你的OKX Secret密钥  
- `OKX_PASSPHRASE`: 你的OKX Passphrase

### 4. 启动服务

部署完成后，机器人会自动启动并开始监控市场。

## 交易策略说明

### 入场条件
- MACD快线上穿慢线（金叉）+ 当前K线为阳线 = 做多
- MACD快线下穿慢线（死叉）+ 当前K线为阴线 = 做空
- ADX > 20（过滤震荡市场）

### 出场条件
- 做多持仓：MACD死叉时平仓
- 做空持仓：MACD金叉时平仓
- 止损止盈：固定2%止损，4%止盈

### 风险控制
- 最大持仓数量：5个
- 每日最大交易次数：20次
- 每日最大亏损：5%
- 单次风险：10%（根据信号强度调整）

## 监控和日志

Railway提供实时日志查看功能：

1. 在项目面板中点击"Logs"
2. 查看机器人运行状态和交易记录
3. 监控错误和警告信息

## 注意事项

⚠️ **重要提醒**：
- 这是实盘交易机器人，请确保充分理解风险
- 建议先在模拟环境测试
- 合理设置资金规模，不要投入超过承受能力的资金
- 定期检查机器人运行状态
- 市场异常时及时手动干预

## 故障排除

### 常见问题

1. **API连接失败**
   - 检查API密钥是否正确
   - 确认API权限包含交易权限
   - 检查IP白名单设置

2. **部署失败**
   - 检查requirements.txt文件
   - 确认Python版本兼容性
   - 查看Railway部署日志

3. **机器人停止运行**
   - 检查Railway服务状态
   - 查看错误日志
   - 检查账户余额是否充足

### 联系支持

如遇到技术问题，请：
1. 查看Railway项目日志
2. 检查环境变量配置
3. 确认API密钥有效性

## 免责声明

本软件仅供学习和研究使用。使用本软件进行实盘交易的所有风险由用户自行承担。开发者不对任何交易损失负责。

请在使用前充分了解数字货币交易的风险，并确保您有足够的风险承受能力。